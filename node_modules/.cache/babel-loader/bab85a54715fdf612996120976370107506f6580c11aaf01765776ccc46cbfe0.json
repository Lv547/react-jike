{"ast":null,"code":"import{Layout,Menu,Popconfirm}from'antd';import{HomeOutlined,DiffOutlined,EditOutlined,LogoutOutlined}from'@ant-design/icons';import'./index.scss';import{Outlet,useLocation,useNavigate}from'react-router-dom';import{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{fetchUserInfo,clearUserInfo}from'@/store/modules/user';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Header=Layout.Header,Sider=Layout.Sider;var items=[{label:'首页',key:'/',icon:/*#__PURE__*/_jsx(HomeOutlined,{})},{label:'文章管理',key:'/article',icon:/*#__PURE__*/_jsx(DiffOutlined,{})},{label:'创建文章',key:'/publish',icon:/*#__PURE__*/_jsx(EditOutlined,{})}];var GeekLayout=function GeekLayout(){var navigate=useNavigate();var onMenuClick=function onMenuClick(route){console.log('菜单被点击了',route);var path=route.key;navigate(path);};// 反向高亮\n// 1. 获取当前路由路径\nvar location=useLocation();console.log(location.pathname);var selectedkey=location.pathname;// 触发个人用户信息action\nvar dispatch=useDispatch();useEffect(function(){dispatch(fetchUserInfo());},[dispatch]);// 退出登录确认回调\nvar onConfirm=function onConfirm(){console.log('确认退出');dispatch(clearUserInfo());navigate('/login');};var name=useSelector(function(state){return state.user.userInfo.name;});return/*#__PURE__*/_jsxs(Layout,{children:[/*#__PURE__*/_jsxs(Header,{className:\"header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"logo\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"user-name\",children:name}),/*#__PURE__*/_jsx(\"span\",{className:\"user-logout\",children:/*#__PURE__*/_jsxs(Popconfirm,{title:\"\\u662F\\u5426\\u786E\\u8BA4\\u9000\\u51FA\\uFF1F\",okText:\"\\u9000\\u51FA\",cancelText:\"\\u53D6\\u6D88\",onConfirm:onConfirm,children:[/*#__PURE__*/_jsx(LogoutOutlined,{}),\" \\u9000\\u51FA\"]})})]})]}),/*#__PURE__*/_jsxs(Layout,{children:[/*#__PURE__*/_jsx(Sider,{width:200,className:\"site-layout-background\",children:/*#__PURE__*/_jsx(Menu,{mode:\"inline\",theme:\"dark\",selectedKeys:selectedkey,onClick:onMenuClick,items:items,style:{height:'100%',borderRight:0}})}),/*#__PURE__*/_jsx(Layout,{className:\"layout-content\",style:{padding:20},children:/*#__PURE__*/_jsx(Outlet,{})})]})]});};export default GeekLayout;","map":{"version":3,"names":["Layout","Menu","Popconfirm","HomeOutlined","DiffOutlined","EditOutlined","LogoutOutlined","Outlet","useLocation","useNavigate","useEffect","useDispatch","useSelector","fetchUserInfo","clearUserInfo","jsx","_jsx","jsxs","_jsxs","Header","Sider","items","label","key","icon","GeekLayout","navigate","onMenuClick","route","console","log","path","location","pathname","selectedkey","dispatch","onConfirm","name","state","user","userInfo","children","className","title","okText","cancelText","width","mode","theme","selectedKeys","onClick","style","height","borderRight","padding"],"sources":["D:/BaiduNetdiskDownload/React 基础 - 配套资料/React 基础 - 配套资料/React 基础 - day09/03-code/react-jike/src/pages/Layout/index.js"],"sourcesContent":["import { Layout, Menu, Popconfirm } from 'antd'\nimport {\n  HomeOutlined,\n  DiffOutlined,\n  EditOutlined,\n  LogoutOutlined,\n} from '@ant-design/icons'\nimport './index.scss'\nimport { Outlet, useLocation, useNavigate } from 'react-router-dom'\nimport { useEffect } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { fetchUserInfo, clearUserInfo } from '@/store/modules/user'\n\nconst { Header, Sider } = Layout\n\nconst items = [\n  {\n    label: '首页',\n    key: '/',\n    icon: <HomeOutlined />,\n  },\n  {\n    label: '文章管理',\n    key: '/article',\n    icon: <DiffOutlined />,\n  },\n  {\n    label: '创建文章',\n    key: '/publish',\n    icon: <EditOutlined />,\n  },\n]\n\nconst GeekLayout = () => {\n  const navigate = useNavigate()\n  const onMenuClick = (route) => {\n    console.log('菜单被点击了', route)\n    const path = route.key\n    navigate(path)\n  }\n\n  // 反向高亮\n  // 1. 获取当前路由路径\n  const location = useLocation()\n  console.log(location.pathname)\n  const selectedkey = location.pathname\n\n  // 触发个人用户信息action\n  const dispatch = useDispatch()\n  useEffect(() => {\n    dispatch(fetchUserInfo())\n  }, [dispatch])\n\n  // 退出登录确认回调\n  const onConfirm = () => {\n    console.log('确认退出')\n    dispatch(clearUserInfo())\n    navigate('/login')\n  }\n\n  const name = useSelector(state => state.user.userInfo.name)\n  return (\n    <Layout>\n      <Header className=\"header\">\n        <div className=\"logo\" />\n        <div className=\"user-info\">\n          <span className=\"user-name\">{name}</span>\n          <span className=\"user-logout\">\n            <Popconfirm title=\"是否确认退出？\" okText=\"退出\" cancelText=\"取消\" onConfirm={onConfirm}>\n              <LogoutOutlined /> 退出\n            </Popconfirm>\n          </span>\n        </div>\n      </Header>\n      <Layout>\n        <Sider width={200} className=\"site-layout-background\">\n          <Menu\n            mode=\"inline\"\n            theme=\"dark\"\n            selectedKeys={selectedkey}\n            onClick={onMenuClick}\n            items={items}\n            style={{ height: '100%', borderRight: 0 }}></Menu>\n        </Sider>\n        <Layout className=\"layout-content\" style={{ padding: 20 }}>\n          {/* 二级路由的出口 */}\n          <Outlet />\n        </Layout>\n      </Layout>\n    </Layout>\n  )\n}\nexport default GeekLayout"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}